$home.print=function(){return{"print-service":{init:function(){$home.print.internal.getSaleById($home.utility.queryString.getParameterByName("id"),function(n){function t(n,t,i){if(i!==undefined&&i!==null){var r=$(n).text();(t===undefined||t===null)&&(t="");$(n).text(r+" "+t+i+" ")}}function i(n,i){t(n,"证书",i.Certificate);t(n,"净度",i.Clarity);t(n,"颜色",i.Color);t(n,"重量",i.Caret);t(n,"切工",i.Cut);t(n,"数量",i.Quantity);t(n,"",i.ProductDescription)}var r=new Date(n.Created);$("#number, #stub-number").text(n.NumberText);$("#year").text(r.getFullYear());$("#month").text(r.getMonth()+1);$("#day").text(r.getDate());$("#stub-customer-name").text(n.CustomerName);$("#stub-customer-phone").text(n.CustomerContacts[0].Value);$("#stub-customer-email").text(n.CustomerContacts[1].Value);$.each(n.Items,function(n,r){var u=r.ProductName.trim();t("#stub-product-name","",u);switch(u){case"裸钻":t("#certificate","",r.Certificate);t("#stub-certificate","",r.Certificate);t("#caret","",r.Caret);t("#stub-caret","",r.Caret);t("#cut","",r.Cut);t("#stub-cut","",r.Cut);t("#clarity","",r.Clarity);t("#stub-clarity","",r.Clarity);t("#color","",r.Color);t("#stub-color","",r.Color);t("#other","",r.ProductDescription);break;case"女戒":i("#female-ring",r);break;case"男戒":i("#male-ring",r);break;case"对戒":i("#match-ring",r);break;case"吊坠":i("#pendant",r);break;case"手链":i("#bracelet",r);break;case"耳钉":i("#earnail",r);break;default:t("#other","",u);i("#other",r)}})})}},"print-receipt":{init:function(){function t(n){var t=0;return $.each(n.Items,function(n,i){t+=i.UnitPrice*i.Quantity}),t}function n(n,t){return t===undefined||t===null?"":n+t+" "}function i(t){return n("",t.ProductName)+n("证书",t.Certificate)+n("净度",t.Clarity)+n("颜色",t.Color)+n("重量",t.Caret)+n("切工",t.Cut)+n("",t.ProductDescription)}$home.print.internal.getSaleById($home.utility.queryString.getParameterByName("id"),function(n){var r=t(n);$("#number").text(n.NumberText);$("#date").text($home.utility.date.toLocalDateString(new Date(n.Created)));$("#payer").text(n.CustomerName);$("#capital").text($home.utility.currency.translateToCapital(r));$("#lowercase").text(r);$("#payee, #worker").text(n.SalesPersonName);$.each(n.Items,function(n,t){$("<tr/>").append($("<td/>").text(i(t))).append($("<td style='text-align: center;'/>").text(t.Quantity)).append($("<td style='text-align: right;'/>").text(t.Quantity*t.UnitPrice)).appendTo("#details tbody")})})}},internal:{getSaleById:function(n,t){var i="/salesservice/Sales("+n+")?$expand=CustomerContacts,Items";odatajs.oData.read(i,function(n){t(n)},function(){alert("初始化打印内容失败。")})}}}}();
//# sourceMappingURL=print.min.js.map
